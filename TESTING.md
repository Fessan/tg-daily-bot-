# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

## –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ
1. [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
2. [–¢–∏–ø—ã —Ç–µ—Å—Ç–æ–≤](#—Ç–∏–ø—ã-—Ç–µ—Å—Ç–æ–≤)
3. [–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã](#–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ-—Ç–µ—Å—Ç—ã)
4. [–†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#—Ä—É—á–Ω–æ–µ-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
5. [CI/CD](#cicd)
6. [–û—Ç–ª–∞–¥–∫–∞](#–æ—Ç–ª–∞–¥–∫–∞)

---

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
pip install -r requirements-dev.txt
```

### –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤

```bash
# –ü—Ä–æ—Å—Ç–æ–π –∑–∞–ø—É—Å–∫
pytest

# –ò–ª–∏ —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç
./run_tests.sh
```

### –†–µ–∑—É–ª—å—Ç–∞—Ç:
```
============================= test session starts ==============================
collected 25 items

tests/test_config.py ........                                            [ 32%]
tests/test_db.py ..........                                              [ 72%]
tests/test_utils.py .......                                              [100%]

============================== 25 passed in 2.45s ===============================
```

---

## –¢–∏–ø—ã —Ç–µ—Å—Ç–æ–≤

### 1. Unit Tests (–Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã) üî¨
**–ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É—é—Ç:** –û—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –º–µ—Ç–æ–¥—ã  
**–°–∫–æ—Ä–æ—Å—Ç—å:** –ë—ã—Å—Ç—Ä—ã–µ (< 0.1 —Å–µ–∫ –∫–∞–∂–¥—ã–π)  
**–ò–∑–æ–ª—è—Ü–∏—è:** –ü–æ–ª–Ω–∞—è (–º–æ–∫–∏ –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)

```bash
pytest -m unit
```

**–ü—Ä–∏–º–µ—Ä—ã:**
- `test_is_workday()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–∞–±–æ—á–µ–≥–æ –¥–Ω—è
- `test_delete_later()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è
- `test_config_loaded()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### 2. Integration Tests (–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã) üîó
**–ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É—é—Ç:** –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –º–æ–¥—É–ª–µ–π  
**–°–∫–æ—Ä–æ—Å—Ç—å:** –°—Ä–µ–¥–Ω–∏–µ (0.1-1 —Å–µ–∫)  
**–ò–∑–æ–ª—è—Ü–∏—è:** –ß–∞—Å—Ç–∏—á–Ω–∞—è (—Ä–µ–∞–ª—å–Ω–∞—è –ë–î, –º–æ–∫–∏ –¥–ª—è Telegram API)

```bash
pytest -m integration
```

**–ü—Ä–∏–º–µ—Ä—ã:**
- `test_init_db_creates_tables()` - —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –ë–î
- `test_insert_report()` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ç—á–µ—Ç–∞ –≤ –ë–î
- `test_ensure_admins_in_db()` - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∞–¥–º–∏–Ω–æ–≤

### 3. End-to-End Tests (E2E —Ç–µ—Å—Ç—ã) üéØ
**–ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É—é—Ç:** –ü–æ–ª–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è  
**–°–∫–æ—Ä–æ—Å—Ç—å:** –ú–µ–¥–ª–µ–Ω–Ω—ã–µ (>1 —Å–µ–∫)  
**–ò–∑–æ–ª—è—Ü–∏—è:** –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –±–ª–∏–∑–∫–æ –∫ prod)

```bash
pytest -m e2e
```

**–ü—Ä–∏–º–µ—Ä—ã:**
- –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª: –æ—Ç–ø—Ä–∞–≤–∫–∞ –¥—ç–π–ª–∏–∫–∞ ‚Üí –æ—Ç–≤–µ—Ç ‚Üí –ø—Ä–æ–≤–µ—Ä–∫–∞ ‚Üí –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ

---

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

```
tests/
‚îú‚îÄ‚îÄ conftest.py           # –û–±—â–∏–µ —Ñ–∏–∫—Å—Ç—É—Ä—ã
‚îú‚îÄ‚îÄ test_config.py        # –¢–µ—Å—Ç—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ test_db.py            # –¢–µ—Å—Ç—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ test_utils.py         # –¢–µ—Å—Ç—ã —É—Ç–∏–ª–∏—Ç
‚îú‚îÄ‚îÄ test_scheduler.py     # –¢–µ—Å—Ç—ã –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ (TODO)
‚îî‚îÄ‚îÄ test_handlers.py      # –¢–µ—Å—Ç—ã –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ (TODO)
```

### –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤

```bash
# –û–¥–∏–Ω —Ñ–∞–π–ª
pytest tests/test_utils.py

# –û–¥–∏–Ω –∫–ª–∞—Å—Å
pytest tests/test_utils.py::TestIsWorkday

# –û–¥–∏–Ω —Ç–µ—Å—Ç
pytest tests/test_utils.py::TestIsWorkday::test_workday_wednesday

# –° verbose –≤—ã–≤–æ–¥–æ–º
pytest tests/test_utils.py -v

# –° –ø–æ–∫–∞–∑–æ–º print()
pytest tests/test_utils.py -s
```

### –ë—ã—Å—Ç—Ä—ã–µ —Ç–µ—Å—Ç—ã (–±–µ–∑ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö)

```bash
pytest -m "not slow"
# –∏–ª–∏
./run_tests.sh fast
```

### –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞ (Coverage)

```bash
# –ó–∞–ø—É—Å–∫ —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
pytest --cov

# –° HTML –æ—Ç—á–µ—Ç–æ–º
pytest --cov --cov-report=html

# –û—Ç–∫—Ä—ã—Ç—å HTML –æ—Ç—á–µ—Ç
open htmlcov/index.html  # macOS
xdg-open htmlcov/index.html  # Linux
```

**–¶–µ–ª–∏ –ø–æ–∫—Ä—ã—Ç–∏—è:**
- ‚úÖ –ú–∏–Ω–∏–º—É–º: 70%
- üéØ –•–æ—Ä–æ—à–æ: 80%
- üèÜ –û—Ç–ª–∏—á–Ω–æ: 90%+

---

## –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

1. **–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –±–æ—Ç–∞:**
   - –ó–∞–π—Ç–∏ –≤ @BotFather
   - –û—Ç–ø—Ä–∞–≤–∏—Ç—å `/newbot`
   - –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω
   - –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ `.env`

2. **–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —á–∞—Ç:**
   - –°–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø—É –∏–ª–∏ —Å—É–ø–µ—Ä–≥—Ä—É–ø–ø—É
   - –î–æ–±–∞–≤–∏—Ç—å –±–æ—Ç–∞
   - –î–∞—Ç—å –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

3. **–ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞:**
   ```bash
   python3 main.py
   ```

### –ß–µ–∫-–ª–∏—Å—Ç –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

#### ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
- [ ] `/start` –≤ —á–∞—Ç–µ - –±–æ—Ç –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è
- [ ] `/help` - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–ø—Ä–∞–≤–∫–∞
- [ ] `/settime 10:00` - –≤—Ä–µ–º—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ

#### ‚úÖ –î—ç–π–ª–∏–∫–∏
- [ ] `/testdaily` - –¥—ç–π–ª–∏–∫ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω
- [ ] Reply –Ω–∞ –¥—ç–π–ª–∏–∫ - –æ—Ç—á–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω
- [ ] –ü–æ–≤—Ç–æ—Ä–Ω—ã–π reply - –æ—Ç—á–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω

#### ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏
- [ ] `/list_active` - —Å–ø–∏—Å–æ–∫ –≤ –õ–°
- [ ] `/exclude @user` - –∏—Å–∫–ª—é—á–µ–Ω
- [ ] `/include @user` - –≤–æ–∑–≤—Ä–∞—â–µ–Ω
- [ ] `/list_all` - –ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫

#### ‚úÖ –û—Ç—á–µ—Ç—ã
- [ ] `/report` - –æ—Ç—á–µ—Ç—ã –∑–∞ —Å–µ–≥–æ–¥–Ω—è
- [ ] `/report 2025-11-26` - –∑–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –¥–∞—Ç—É
- [ ] `/mychats` –≤ –õ–° - —Å–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤

#### ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏–∫–∞
- [ ] –î—ç–π–ª–∏–∫ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é
- [ ] –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ —á–µ—Ä–µ–∑ 2 —á–∞—Å–∞
- [ ] –ù–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ –≤—ã—Ö–æ–¥–Ω—ã–µ

**–ü–æ–ª–Ω—ã–π —á–µ–∫-–ª–∏—Å—Ç:** —Å–º. [TEST_CASES.md](TEST_CASES.md)

---

## –§–∏–∫—Å—Ç—É—Ä—ã

### –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ñ–∏–∫—Å—Ç—É—Ä—ã (conftest.py)

#### `temp_db`
–í—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª –ë–î, —É–¥–∞–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∞

```python
def test_something(temp_db):
    # temp_db - –ø—É—Ç—å –∫ –≤—Ä–µ–º–µ–Ω–Ω–æ–π –ë–î
    pass
```

#### `test_db`
–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ë–î —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏

```python
async def test_something(test_db):
    async with aiosqlite.connect(test_db) as db:
        # –ë–î —É–∂–µ —Å–æ–∑–¥–∞–Ω–∞ —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏
        pass
```

#### `populated_db`
–ë–î —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ (—á–∞—Ç, —É—á–∞—Å—Ç–Ω–∏–∫–∏, –æ—Ç—á–µ—Ç—ã)

```python
async def test_something(populated_db):
    # –í –ë–î —É–∂–µ –µ—Å—Ç—å:
    # - –ß–∞—Ç -1001234567890
    # - 3 —É—á–∞—Å—Ç–Ω–∏–∫–∞
    # - 1 –æ—Ç—á–µ—Ç
    pass
```

#### `mock_bot`
Mock –æ–±—ä–µ–∫—Ç –±–æ—Ç–∞

```python
async def test_something(mock_bot):
    mock_bot.send_message.return_value = ...
    # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ bot
```

#### `mock_message`
Mock –æ–±—ä–µ–∫—Ç —Å–æ–æ–±—â–µ–Ω–∏—è Telegram

```python
async def test_something(mock_message):
    # –ì–æ—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å chat, user, text
    pass
```

---

## –ù–∞–ø–∏—Å–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤

### Unit —Ç–µ—Å—Ç

```python
import pytest

class TestMyFunction:
    @pytest.mark.unit
    def test_basic_case(self):
        """–ë–∞–∑–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π"""
        result = my_function(input_data)
        assert result == expected_output
    
    @pytest.mark.unit
    def test_edge_case(self):
        """–ì—Ä–∞–Ω–∏—á–Ω—ã–π —Å–ª—É—á–∞–π"""
        result = my_function(edge_input)
        assert result is not None
```

### Integration —Ç–µ—Å—Ç —Å –ë–î

```python
import pytest
import aiosqlite

class TestDatabaseOperation:
    @pytest.mark.integration
    @pytest.mark.asyncio
    async def test_insert_and_select(self, test_db):
        """–í—Å—Ç–∞–≤–∫–∞ –∏ –≤—ã–±–æ—Ä–∫–∞ –∏–∑ –ë–î"""
        async with aiosqlite.connect(test_db) as db:
            await db.execute("INSERT INTO ...")
            await db.commit()
            
            cursor = await db.execute("SELECT ...")
            row = await cursor.fetchone()
            
            assert row is not None
```

### –¢–µ—Å—Ç —Å –º–æ–∫–∞–º–∏

```python
from unittest.mock import AsyncMock, patch

class TestWithMocks:
    @pytest.mark.unit
    @pytest.mark.asyncio
    async def test_with_mock(self, mock_bot):
        """–¢–µ—Å—Ç —Å mock –æ–±—ä–µ–∫—Ç–∞–º–∏"""
        mock_bot.send_message = AsyncMock()
        
        await some_function(mock_bot, chat_id, text)
        
        mock_bot.send_message.assert_called_once_with(
            chat_id, text
        )
```

---

## CI/CD

### GitHub Actions (–ø—Ä–∏–º–µ—Ä)

```yaml
name: Tests

on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.11'
    
    - name: Install dependencies
      run: |
        pip install -r requirements-dev.txt
    
    - name: Run tests
      run: |
        pytest --cov --cov-report=xml
    
    - name: Upload coverage
      uses: codecov/codecov-action@v3
```

---

## –û—Ç–ª–∞–¥–∫–∞

### –û—Ç–ª–∞–¥–∫–∞ —Ç–µ—Å—Ç–æ–≤

```bash
# –ü–æ–∫–∞–∑–∞—Ç—å print() –≤ —Ç–µ—Å—Ç–∞—Ö
pytest -s

# –ü–æ–∫–∞–∑–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–∏ –æ—à–∏–±–∫–µ
pytest -l

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è –Ω–∞ –ø–µ—Ä–≤–æ–π –æ—à–∏–±–∫–µ
pytest -x

# –í–æ–π—Ç–∏ –≤ pdb –ø—Ä–∏ –æ—à–∏–±–∫–µ
pytest --pdb

# Verbose –≤—ã–≤–æ–¥
pytest -vv
```

### –û—Ç–ª–∞–¥–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞

```python
def test_debug_me():
    import pdb; pdb.set_trace()  # –ë—Ä–µ–π–∫–ø–æ–∏–Ω—Ç
    result = function_to_debug()
    assert result == expected
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ç–µ—Å—Ç–∞—Ö

```python
import logging

def test_with_logging(caplog):
    caplog.set_level(logging.INFO)
    
    # –ö–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –ª–æ–≥–∏—Ä—É–µ—Ç
    function_that_logs()
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
    assert "Expected message" in caplog.text
```

---

## Continuous Testing

### Watch mode (–∞–≤—Ç–æ-–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö)

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å pytest-watch
pip install pytest-watch

# –ó–∞–ø—É—Å—Ç–∏—Ç—å
ptw
```

### Pre-commit —Ö—É–∫–∏

–°–æ–∑–¥–∞—Ç—å `.pre-commit-config.yaml`:

```yaml
repos:
  - repo: local
    hooks:
      - id: pytest
        name: pytest
        entry: pytest
        language: system
        pass_filenames: false
        always_run: true
```

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å:
```bash
pip install pre-commit
pre-commit install
```

–¢–µ–ø–µ—Ä—å —Ç–µ—Å—Ç—ã –±—É–¥—É—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –∫–æ–º–º–∏—Ç–æ–º!

---

## –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞

### –ß—Ç–æ –∏–∑–º–µ—Ä—è–µ–º:

1. **Coverage (–ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞)**
   - –¶–µ–ª—å: >80%
   - –ö–æ–º–∞–Ω–¥–∞: `pytest --cov`

2. **Test Duration (–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è)**
   - –¶–µ–ª—å: <5 —Å–µ–∫—É–Ω–¥ –¥–ª—è –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
   - –ö–æ–º–∞–Ω–¥–∞: `pytest --durations=10`

3. **Flaky Tests (–ù–µ—Å—Ç–∞–±–∏–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã)**
   - –¶–µ–ª—å: 0
   - –ü—Ä–æ–≤–µ—Ä–∫–∞: –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω—ã–π –∑–∞–ø—É—Å–∫

4. **Code Quality**
   - –õ–∏–Ω—Ç–µ—Ä: `flake8`
   - –§–æ—Ä–º–∞—Ç—Ç–µ—Ä: `black`
   - –¢–∏–ø—ã: `mypy`

---

## Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: –¢–µ—Å—Ç—ã –Ω–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ pytest —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
pip install pytest

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å pytest.ini
cat pytest.ini

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å —è–≤–Ω—ã–º —É–∫–∞–∑–∞–Ω–∏–µ–º –ø–∞–ø–∫–∏
pytest tests/
```

### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ –º–æ–¥—É–ª–µ–π

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –Ω–∞—Ö–æ–¥–∏–º—Å—è –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
cd /path/to/tg-daily-bot-

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–µ–∫—Ç –≤ development mode
pip install -e .
```

### –ü—Ä–æ–±–ª–µ–º–∞: –¢–µ—Å—Ç—ã –ë–î –ø–∞–¥–∞—é—Ç

**–†–µ—à–µ–Ω–∏–µ:**
```python
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è temp_db –∏–ª–∏ test_db —Ñ–∏–∫—Å—Ç—É—Ä–∞
async def test_something(test_db):  # ‚Üê –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ!
    ...
```

### –ü—Ä–æ–±–ª–µ–º–∞: AsyncIO –æ—à–∏–±–∫–∏

**–†–µ—à–µ–Ω–∏–µ:**
```python
# –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ —Ç–µ—Å—Ç –ø–æ–º–µ—á–µ–Ω @pytest.mark.asyncio
@pytest.mark.asyncio
async def test_async_function():  # ‚Üê async def!
    ...
```

---

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
pytest --collect-only

# –°–∞–º—ã–µ –º–µ–¥–ª–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
pytest --durations=10

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ failed —Ç–µ—Å—Ç—ã —Å –ø—Ä–æ—à–ª–æ–≥–æ —Ä–∞–∑–∞
pytest --lf

# –ó–∞–ø—É—Å—Ç–∏—Ç—å failed + N —Å–ª–µ–¥—É—é—â–∏—Ö
pytest --lf --maxfail=1

# –°–ª—É—á–∞–π–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ (–¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏)
pytest --random-order

# –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ (—Ç—Ä–µ–±—É–µ—Ç pytest-xdist)
pytest -n 4
```

---

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- **pytest –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** https://docs.pytest.org/
- **pytest-asyncio:** https://pytest-asyncio.readthedocs.io/
- **Coverage.py:** https://coverage.readthedocs.io/
- **Telegram Bot API:** https://core.telegram.org/bots/api

---

**–í–∞–∂–Ω–æ:** –¢–µ—Å—Ç—ã - —ç—Ç–æ –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π —Ç–æ–∂–µ –Ω—É–∂–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å. –ü–∏—à–∏—Ç–µ –ø–æ–Ω—è—Ç–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å —Ö–æ—Ä–æ—à–∏–º–∏ –∏–º–µ–Ω–∞–º–∏ –∏ docstrings!

‚úÖ **–•–æ—Ä–æ—à–∏–π —Ç–µ—Å—Ç:**
```python
@pytest.mark.unit
def test_workday_returns_true_for_monday():
    """–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∫–∞–∫ —Ä–∞–±–æ—á–∏–π –¥–µ–Ω—å"""
    with freeze_time("2025-11-24"):  # Monday
        assert is_workday() is True
```

‚ùå **–ü–ª–æ—Ö–æ–π —Ç–µ—Å—Ç:**
```python
def test_1():
    """Test"""
    assert func() == True  # –ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ–º? –ü–æ—á–µ–º—É True?
```

---

**Happy Testing! üß™‚ú®**

