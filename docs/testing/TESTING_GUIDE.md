# üß™ –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é Telegram Daily Bot

–≠—Ç–æ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞.

---

## üìñ –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
2. [–¢–∏–ø—ã —Ç–µ—Å—Ç–æ–≤](#—Ç–∏–ø—ã-—Ç–µ—Å—Ç–æ–≤)
3. [–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã](#–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ-—Ç–µ—Å—Ç—ã)
4. [–†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#—Ä—É—á–Ω–æ–µ-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
5. [–¢–µ—Å—Ç-–∫–µ–π—Å—ã](#—Ç–µ—Å—Ç-–∫–µ–π—Å—ã)
6. [–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º](#—Ä–µ—à–µ–Ω–∏–µ-–ø—Ä–æ–±–ª–µ–º)

---

# –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

## üöÄ –ó–∞ 3 –º–∏–Ω—É—Ç—ã

### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –°–æ–∑–¥–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python3 -m venv venv

# –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å
source venv/bin/activate  # Linux/macOS
# –∏–ª–∏
venv\Scripts\activate  # Windows
```

### –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
pip install -r requirements-dev.txt
```

### –®–∞–≥ 3: –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

#### –í—Å–µ —Ç–µ—Å—Ç—ã:
```bash
pytest
```

#### –° –ø–æ–∫—Ä—ã—Ç–∏–µ–º:
```bash
pytest --cov
```

#### –ß–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç:
```bash
./run_tests.sh
./run_tests.sh unit        # –¢–æ–ª—å–∫–æ unit —Ç–µ—Å—Ç—ã
./run_tests.sh coverage    # –° –æ—Ç—á–µ—Ç–æ–º –æ –ø–æ–∫—Ä—ã—Ç–∏–∏
```

### –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

```
============================= test session starts ==============================
platform linux -- Python 3.11.x, pytest-7.4.3, pluggy-1.3.0
rootdir: /home/user/tg-daily-bot-
configfile: pytest.ini
plugins: asyncio-0.21.1, cov-4.1.0, mock-3.12.0
collected 37 items

tests/test_config.py ............                                        [ 32%]
tests/test_db.py ...............                                         [ 73%]
tests/test_utils.py ..........                                           [100%]

============================== 37 passed in 3.45s ===============================
```

---

# –¢–∏–ø—ã —Ç–µ—Å—Ç–æ–≤

## 1. Unit Tests (–Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã) üî¨

**–ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É—é—Ç:** –û—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –º–µ—Ç–æ–¥—ã  
**–°–∫–æ—Ä–æ—Å—Ç—å:** –ë—ã—Å—Ç—Ä—ã–µ (< 0.1 —Å–µ–∫ –∫–∞–∂–¥—ã–π)  
**–ò–∑–æ–ª—è—Ü–∏—è:** –ü–æ–ª–Ω–∞—è (–º–æ–∫–∏ –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)

```bash
pytest -m unit
```

**–ü—Ä–∏–º–µ—Ä—ã:**
- `test_is_workday()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–∞–±–æ—á–µ–≥–æ –¥–Ω—è
- `test_delete_later()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è
- `test_config_loaded()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

## 2. Integration Tests (–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã) üîó

**–ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É—é—Ç:** –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –º–æ–¥—É–ª–µ–π  
**–°–∫–æ—Ä–æ—Å—Ç—å:** –°—Ä–µ–¥–Ω–∏–µ (0.1-1 —Å–µ–∫)  
**–ò–∑–æ–ª—è—Ü–∏—è:** –ß–∞—Å—Ç–∏—á–Ω–∞—è (—Ä–µ–∞–ª—å–Ω–∞—è –ë–î, –º–æ–∫–∏ –¥–ª—è Telegram API)

```bash
pytest -m integration
```

**–ü—Ä–∏–º–µ—Ä—ã:**
- `test_init_db_creates_tables()` - —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –ë–î
- `test_insert_report()` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ç—á–µ—Ç–∞ –≤ –ë–î
- `test_ensure_admins_in_db()` - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∞–¥–º–∏–Ω–æ–≤

## 3. End-to-End Tests (E2E —Ç–µ—Å—Ç—ã) üéØ

**–ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É—é—Ç:** –ü–æ–ª–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è  
**–°–∫–æ—Ä–æ—Å—Ç—å:** –ú–µ–¥–ª–µ–Ω–Ω—ã–µ (>1 —Å–µ–∫)  
**–ò–∑–æ–ª—è—Ü–∏—è:** –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –±–ª–∏–∑–∫–æ –∫ prod)

```bash
pytest -m e2e
```

---

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã

## –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

### –í—Å–µ —Ç–µ—Å—Ç—ã
```bash
pytest
```

### –ü–æ —Ç–∏–ø–∞–º
```bash
pytest -m unit          # –¢–æ–ª—å–∫–æ unit —Ç–µ—Å—Ç—ã
pytest -m integration   # –¢–æ–ª—å–∫–æ integration —Ç–µ—Å—Ç—ã
pytest -m e2e          # –¢–æ–ª—å–∫–æ e2e —Ç–µ—Å—Ç—ã
```

### –ü–æ —Ñ–∞–π–ª–∞–º
```bash
pytest tests/test_config.py      # –¢–µ—Å—Ç—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
pytest tests/test_db.py          # –¢–µ—Å—Ç—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
pytest tests/test_utils.py       # –¢–µ—Å—Ç—ã —É—Ç–∏–ª–∏—Ç
```

### –° –æ–ø—Ü–∏—è–º–∏
```bash
pytest -v                        # Verbose (–ø–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥)
pytest -s                        # –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å print()
pytest -x                        # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è –Ω–∞ –ø–µ—Ä–≤–æ–π –æ—à–∏–±–∫–µ
pytest --lf                      # –¢–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ —É–ø–∞–≤—à–∏–µ
pytest --cov                     # –° –ø–æ–∫—Ä—ã—Ç–∏–µ–º –∫–æ–¥–∞
pytest --cov-report=html         # HTML –æ—Ç—á–µ—Ç –ø–æ–∫—Ä—ã—Ç–∏—è
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

```
tests/
‚îú‚îÄ‚îÄ conftest.py              # –§–∏–∫—Å—Ç—É—Ä—ã –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ pytest
‚îú‚îÄ‚îÄ test_config.py           # –¢–µ—Å—Ç—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ test_db.py               # –¢–µ—Å—Ç—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îî‚îÄ‚îÄ test_utils.py            # –¢–µ—Å—Ç—ã —É—Ç–∏–ª–∏—Ç
```

## Coverage (–ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞)

–¶–µ–ª—å: **> 70%** –ø–æ–∫—Ä—ã—Ç–∏—è –∫–æ–¥–∞ —Ç–µ—Å—Ç–∞–º–∏

```bash
# –ó–∞–ø—É—Å–∫ —Å coverage
pytest --cov

# HTML –æ—Ç—á–µ—Ç
pytest --cov --cov-report=html
open htmlcov/index.html

# –î–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç
pytest --cov --cov-report=term-missing
```

---

# –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

## –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
1. Python 3.11+
2. –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `pip install -r requirements-dev.txt`
3. –°–æ–∑–¥–∞–Ω —Ç–µ—Å—Ç–æ–≤—ã–π Telegram –±–æ—Ç —á–µ—Ä–µ–∑ @BotFather
4. –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `.env` —Å `BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω`
5. –°–æ–∑–¥–∞–Ω —Ç–µ—Å—Ç–æ–≤—ã–π Telegram —á–∞—Ç (–≥—Ä—É–ø–ø–∞ –∏–ª–∏ —Å—É–ø–µ—Ä–≥—Ä—É–ø–ø–∞)
6. –ë–æ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ —á–∞—Ç —Å –ø—Ä–∞–≤–∞–º–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞

1. **–°–æ–∑–¥–∞—Ç—å `.env`:**
   ```bash
   echo "BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–∑–¥–µ—Å—å" > .env
   ```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞:**
   ```bash
   python main.py
   ```

3. **–°–ª–µ–¥–æ–≤–∞—Ç—å —Ç–µ—Å—Ç-–∫–µ–π—Å–∞–º –Ω–∏–∂–µ**

---

# –¢–µ—Å—Ç-–∫–µ–π—Å—ã

## TC-001: –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ –±–µ–∑ .env —Ñ–∞–π–ª–∞

**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:** –§–∞–π–ª `.env` –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

**–®–∞–≥–∏:**
1. –£–¥–∞–ª–∏—Ç—å –∏–ª–∏ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å `.env`
2. –ó–∞–ø—É—Å—Ç–∏—Ç—å `python3 main.py`

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
ValueError: BOT_TOKEN –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ .env —Ñ–∞–π–ª–µ!
```

**–°—Ç–∞—Ç—É—Å:** ‚¨ú –ù–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª—Å—è | ‚úÖ –ü—Ä–æ—à–µ–ª | ‚ùå –ü—Ä–æ–≤–∞–ª–∏–ª—Å—è

---

## TC-002: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —á–∞—Ç–∞ –∫–æ–º–∞–Ω–¥–æ–π /start

**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:** –ë–æ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ —á–∞—Ç —Å –ø—Ä–∞–≤–∞–º–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

**–®–∞–≥–∏:**
1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å `/start` –≤ —á–∞—Ç
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–≤–µ—Ç –±–æ—Ç–∞

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º
- –ß–∞—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
- –ê–¥–º–∏–Ω—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ participants

**–°—Ç–∞—Ç—É—Å:** ‚¨ú

---

## TC-003: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –¥—ç–π–ª–∏–∫–∞

**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:** –ß–∞—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω —á–µ—Ä–µ–∑ `/start`

**–®–∞–≥–∏:**
1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å `/settime 10:00`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–≤–µ—Ç –±–æ—Ç–∞

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ –í—Ä–µ–º—è –¥—ç–π–ª–∏–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ: 10:00 –ú–°–ö
```

**–°—Ç–∞—Ç—É—Å:** ‚¨ú

---

## TC-004: –¢–µ—Å—Ç–æ–≤–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –¥—ç–π–ª–∏–∫–∞

**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:** –í—Ä–µ–º—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ

**–®–∞–≥–∏:**
1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å `/testdaily`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –≤–æ–ø—Ä–æ—Å–∞–º–∏ –¥—ç–π–ª–∏–∫–∞
- –°–æ–æ–±—â–µ–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏—Ç 3 –≤–æ–ø—Ä–æ—Å–∞

**–°—Ç–∞—Ç—É—Å:** ‚¨ú

---

## TC-005: –û—Ç–≤–µ—Ç –Ω–∞ –¥—ç–π–ª–∏–∫

**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:** –î—ç–π–ª–∏–∫ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω

**–®–∞–≥–∏:**
1. –û—Ç–≤–µ—Ç–∏—Ç—å (reply) –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥—ç–π–ª–∏–∫–∞ –ª—é–±—ã–º —Ç–µ–∫—Å—Ç–æ–º
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∞–∫—Ü–∏—é –±–æ—Ç–∞

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ë–æ—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ—Ç–≤–µ—Ç –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ –æ—Ç—á–∏—Ç–∞–≤—à–∏–π—Å—è
- –ë–æ—Ç —Ä–µ–∞–≥–∏—Ä—É–µ—Ç üëç

**–°—Ç–∞—Ç—É—Å:** ‚¨ú

---

## TC-006: –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:** –ß–∞—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω

**–®–∞–≥–∏:**
1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å `/exclude @username` –∏–ª–∏ `/exclude user_id`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–≤–µ—Ç

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å @username –∏—Å–∫–ª—é—á–µ–Ω –∏–∑ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞
```

**–°—Ç–∞—Ç—É—Å:** ‚¨ú

---

## TC-007: –í–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏—Å–∫–ª—é—á–µ–Ω

**–®–∞–≥–∏:**
1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å `/include @username` –∏–ª–∏ `/include user_id`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–≤–µ—Ç

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å @username –≤–∫–ª—é—á–µ–Ω –≤ –∞–∫—Ç–∏–≤–Ω—ã–π —Å–ø–∏—Å–æ–∫
```

**–°—Ç–∞—Ç—É—Å:** ‚¨ú

---

## TC-008: –°–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤

**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:** –ï—Å—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏

**–®–∞–≥–∏:**
1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å `/list_active`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–≤–µ—Ç

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –≤ –õ–° –∞–¥–º–∏–Ω—É
- –í —á–∞—Ç–µ –∫–æ—Ä–æ—Ç–∫–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ (—É–¥–∞–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ 30 –º–∏–Ω)

**–°—Ç–∞—Ç—É—Å:** ‚¨ú

---

## TC-009: –ü—Ä–æ—Å–º–æ—Ç—Ä –æ—Ç—á–µ—Ç–æ–≤ –∑–∞ –¥–∞—Ç—É

**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:** –ï—Å—Ç—å –æ—Ç—á–µ—Ç—ã –≤ –±–∞–∑–µ

**–®–∞–≥–∏:**
1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å `/report 2025-11-26` –∏–ª–∏ `/report`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–≤–µ—Ç

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç—á–µ—Ç—ã –≤ –õ–° –∞–¥–º–∏–Ω—É
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫—Ç–æ –æ—Ç—á–∏—Ç–∞–ª—Å—è –∏ –∫—Ç–æ –Ω–µ—Ç

**–°—Ç–∞—Ç—É—Å:** ‚¨ú

---

## TC-010: –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –Ω–µ–æ—Ç—á–∏—Ç–∞–≤—à–∏–º—Å—è

**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:** 
- –î—ç–π–ª–∏–∫ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω
- –ü—Ä–æ—à–ª–æ 2 —á–∞—Å–∞
- –ù–µ –≤—Å–µ –æ—Ç—á–∏—Ç–∞–ª–∏—Å—å

**–®–∞–≥–∏:**
1. –î–æ–∂–¥–∞—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è (–∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª –≤ config.py –¥–ª—è —Ç–µ—Å—Ç–∞)
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ë–æ—Ç —É–ø–æ–º–∏–Ω–∞–µ—Ç (@mention) –Ω–µ–æ—Ç—á–∏—Ç–∞–≤—à–∏—Ö—Å—è
- –°–æ–æ–±—â–µ–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ø–∏—Å–æ–∫ —Å –∏–º–µ–Ω–∞–º–∏

**–°—Ç–∞—Ç—É—Å:** ‚¨ú

---

## TC-011: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –≤—ã—Ö–æ–¥–Ω—ã–µ –∏ –ø—Ä–∞–∑–¥–Ω–∏–∫–∏

**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:** –í—Ä–µ–º—è –¥—ç–π–ª–∏–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ

**–®–∞–≥–∏:**
1. –ò–∑–º–µ–Ω–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—É—é –¥–∞—Ç—É –Ω–∞ –≤—ã—Ö–æ–¥–Ω–æ–π/–ø—Ä–∞–∑–¥–Ω–∏–∫ (–∏–ª–∏ –¥–æ–∂–¥–∞—Ç—å—Å—è)
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –¥—ç–π–ª–∏–∫ –ù–ï –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –í —Å—É–±–±–æ—Ç—É, –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ –∏ –ø—Ä–∞–∑–¥–Ω–∏–∫–∏ –†–§ –¥—ç–π–ª–∏–∫–∏ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è
- –í –ª–æ–≥–∞—Ö —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∞—è –∑–∞–ø–∏—Å—å

**–°—Ç–∞—Ç—É—Å:** ‚¨ú

---

## TC-012: Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:** Docker —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

**–®–∞–≥–∏:**
1. –°–æ–∑–¥–∞—Ç—å `.env` —Å —Ç–æ–∫–µ–Ω–æ–º
2. –ó–∞–ø—É—Å—Ç–∏—Ç—å `./docker-test.sh`
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏: `docker logs tg-daily-bot`

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ –ë–æ—Ç —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω! Scheduler —Ä–∞–±–æ—Ç–∞–µ—Ç
```

**–°—Ç–∞—Ç—É—Å:** ‚¨ú

---

# –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

## –ü—Ä–æ–±–ª–µ–º–∞: `ModuleNotFoundError`

**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–æ
```bash
which python  # –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –ø—É—Ç—å –≤ venv/
```

## –ü—Ä–æ–±–ª–µ–º–∞: `pytest: command not found`

**–†–µ—à–µ–Ω–∏–µ:** –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```bash
pip install -r requirements-dev.txt
```

## –ü—Ä–æ–±–ª–µ–º–∞: –¢–µ—Å—Ç—ã –ø–∞–¥–∞—é—Ç

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `.env` —Ñ–∞–π–ª —Å BOT_TOKEN (–¥–ª—è —Ç–µ—Å—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–æ–∫–æ–≤—ã–π —Ç–æ–∫–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

## –ü—Ä–æ–±–ª–µ–º–∞: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞

**–†–µ—à–µ–Ω–∏–µ:** 
```bash
# –ó–∞–∫—Ä–æ–π—Ç–µ –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ bot.db
pkill -f "python main.py"

# –£–¥–∞–ª–∏—Ç–µ lock —Ñ–∞–π–ª—ã
rm -f bot.db-journal bot.db-wal bot.db-shm
```

## –ü—Ä–æ–±–ª–µ–º–∞: Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
docker logs tg-daily-bot

# –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –æ–±—Ä–∞–∑
docker compose build --no-cache
docker compose up -d
```

---

# CI/CD

## GitHub Actions (–ø—Ä–∏–º–µ—Ä)

```yaml
name: Tests

on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v2
    
    - name: Set up Python
      uses: actions/setup-python@v2
      with:
        python-version: '3.11'
    
    - name: Install dependencies
      run: |
        pip install -r requirements-dev.txt
    
    - name: Run tests
      run: |
        pytest --cov --cov-report=xml
    
    - name: Upload coverage
      uses: codecov/codecov-action@v2
```

---

# –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
pytest                          # –í—Å–µ —Ç–µ—Å—Ç—ã
pytest -v                       # –ü–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥
pytest -x                       # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è –Ω–∞ –ø–µ—Ä–≤–æ–π –æ—à–∏–±–∫–µ
pytest --lf                     # –¢–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ —É–ø–∞–≤—à–∏–µ
pytest -k "test_name"           # –ü–æ –∏–º–µ–Ω–∏ —Ç–µ—Å—Ç–∞

# Coverage
pytest --cov                    # –° –ø–æ–∫—Ä—ã—Ç–∏–µ–º
pytest --cov-report=html        # HTML –æ—Ç—á–µ—Ç
pytest --cov-report=term-missing # –ü–æ–∫–∞–∑–∞—Ç—å –Ω–µ–ø–æ–∫—Ä—ã—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏

# –ú–∞—Ä–∫–µ—Ä—ã
pytest -m unit                  # –¢–æ–ª—å–∫–æ unit —Ç–µ—Å—Ç—ã
pytest -m integration           # –¢–æ–ª—å–∫–æ integration
pytest -m "not slow"            # –ò—Å–∫–ª—é—á–∏—Ç—å –º–µ–¥–ª–µ–Ω–Ω—ã–µ

# –û—Ç–ª–∞–¥–∫–∞
pytest -s                       # –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å print()
pytest --pdb                    # –û—Ç–ª–∞–¥—á–∏–∫ –ø—Ä–∏ –æ—à–∏–±–∫–µ
pytest --trace                  # –û—Ç–ª–∞–¥—á–∏–∫ –≤ –Ω–∞—á–∞–ª–µ

# –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
pytest --durations=10           # 10 —Å–∞–º—ã—Ö –º–µ–¥–ª–µ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
pytest -n auto                  # –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ (pytest-xdist)
```

---

# –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** [ARCHITECTURE.md](../../ARCHITECTURE.md)
- **–ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ:** [TESTING.md](../../TESTING.md)
- **–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤:** [TEST_RESULTS.md](../../TEST_RESULTS.md)

---

**Happy Testing! üß™‚ú®**

*–í–µ—Ä—Å–∏—è: 1.0*  
*–î–∞—Ç–∞: 2025-11-26*  
*–ê–≤—Ç–æ—Ä: @Fessan*










