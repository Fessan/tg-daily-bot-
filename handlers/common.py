"""
Обработчики общих команд (доступных всем пользователям)
"""
from aiogram.types import Message
from aiogram.filters import Command

from bot_instance import dp


@dp.message(Command("help"))
async def cmd_help(message: Message):
    """Показать справку по командам бота"""
    text = (
        "<b>Как работать с Дейлик-Ботом?</b>\n\n"
        "Дейлик-Бот помогает собирать ежедневные отчёты в чатах, напоминать о них, и сохранять в базе для просмотра.\n\n"
        "<b>Главные команды для админа (только из чата):</b>\n"
        "• /start — добавить бота в чат и инициализировать базу\n"
        "• /settime HH:MM — установить время отправки дэйлика (по МСК)\n"
        "• /testdaily — отправить тестовый дэйлик сейчас\n"
        "• /exclude @username или /exclude user_id — исключить участника из списка напоминаний\n"
        "• /include @username или /include user_id — вернуть участника в список\n"
        "• /list_active — список всех активных участников\n"
        "• /list_all — полный список всех участников с user_id и статусом\n"
        "• /report 2025-06-24 — получить отчёты за дату (или сегодня, если дату не указали)\n\n"
        "<b>Главные команды для админа (в ЛС):</b>\n"
        "• /mychats — посмотреть список ваших чатов (название и chat_id)\n"
        "• /report chat_id 2025-06-24 — получить отчёты за дату из нужного чата в личку\n\n"
        "<b>Общие команды для участников:</b>\n"
        "• Чтобы попасть в список для отчётов — просто один раз ответьте реплаем на сообщение дэйлика.\n"
        "• Если вас исключили, можно снова попасть в список через /include или ответив на дэйлик.\n\n"
        "<b>Особенности:</b>\n"
        "• Все отчёты сохраняются в базе.\n"
        "• Напоминания приходят только активным участникам, если не сдали дэйлик в течение 2 часов.\n"
        "• Время указывается по Москве.\n"
        "• Дейлик присылается каждый день автоматически.\n"
        "• Данные о чатах и отчётах доступны только администраторам.\n\n"
        "<b>Для связи с разработчиком/поддержкой: @Fessan</b>"
    )
    await message.answer(text, parse_mode="HTML")

